generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model admins {
  id             Int       @id @default(autoincrement())
  email          String    @unique @db.VarChar(255)
  password_hash  String    @db.VarChar(255)
  full_name      String    @db.VarChar(255)
  role           String?   @default("admin") @db.VarChar(100)
  is_super_admin Boolean?  @default(false)
  created_at     DateTime? @default(now()) @db.Timestamptz(6)
  last_login     DateTime? @db.Timestamptz(6)
}

model business_accounts {
  id                    Int                     @id @default(autoincrement())
  business_id           Int
  balance               Decimal?                @default(0.00) @db.Decimal(15, 2)
  is_primary            Boolean?                @default(false)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?               @default(now()) @db.Timestamptz(6)
  currency              String                  @db.VarChar(10)
  business_profiles     business_profiles       @relation(fields: [business_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  currencies            currencies              @relation(fields: [currency], references: [code], onDelete: NoAction, onUpdate: NoAction)
  business_transactions business_transactions[]

  @@index([business_id], map: "idx_business_accounts_business_id")
  @@index([currency], map: "idx_business_accounts_currency")
  @@index([is_primary], map: "idx_business_accounts_is_primary")
}

model business_favorites {
  id                Int               @id @default(autoincrement())
  business_id       Int
  creator_id        Int
  created_at        DateTime?         @default(now()) @db.Timestamptz(6)
  business_profiles business_profiles @relation(fields: [business_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  creator_profiles  creator_profiles  @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([business_id, creator_id])
}

model business_profiles {
  user_id                  Int                  @id
  company_name             String               @db.VarChar(255)
  business_email           String?              @db.VarChar(255)
  phone                    String?              @db.VarChar(50)
  website_url              String?              @db.VarChar(255)
  logo_url                 String?              @db.VarChar(500)
  description              String?
  max_tags_allowed         Int?                 @default(10)
  created_at               DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?            @default(now()) @db.Timestamptz(6)
  business_employee_range  String?              @db.VarChar(100)
  business_industry_name   business_industry?
  location                 String?              @db.VarChar(255)
  business_cover_image_url String?              @db.VarChar(255)
  company_nickName         String?              @db.VarChar(255)
  legal_status_id          Int?
  business_industry_id     Int?
  business_accounts        business_accounts[]
  business_favorites       business_favorites[]
  business_industries      business_industries? @relation(fields: [business_industry_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  legal_status             legal_statuses?      @relation(fields: [legal_status_id], references: [id])
  users                    users                @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  business_tags            business_tags[]
  campaigns                campaigns[]

  @@index([user_id], map: "idx_business_profiles_user_id")
  @@index([legal_status_id], map: "idx_business_profiles_legal_status_id")
}

model business_tags {
  business_id       Int
  tag_id            Int
  created_at        DateTime?         @default(now()) @db.Timestamptz(6)
  business_profiles business_profiles @relation(fields: [business_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  tags              tags              @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([business_id, tag_id])
}

model campaign_analytics {
  id                     Int       @id @default(autoincrement())
  campaign_id            Int
  total_videos           Int?      @default(0)
  total_views            Int?      @default(0)
  total_engagement       Int?      @default(0)
  total_reach            Int?      @default(0)
  total_spent            Decimal?  @default(0.00) @db.Decimal(15, 2)
  participating_creators Int?      @default(0)
  snapshot_date          DateTime  @db.Date
  created_at             DateTime? @default(now()) @db.Timestamptz(6)
  campaigns              campaigns @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([campaign_id, snapshot_date])
  @@index([campaign_id, snapshot_date], map: "idx_campaign_analytics_date")
}

model campaign_assets {
  id          Int       @id @default(autoincrement())
  campaign_id Int
  asset_name  String    @db.VarChar(255)
  asset_url   String    @db.VarChar(500)
  asset_type  String?   @db.VarChar(50)
  file_size   BigInt?
  uploaded_at DateTime? @default(now()) @db.Timestamptz(6)
  campaigns   campaigns @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model campaign_budget_tracking {
  id               Int       @id @default(autoincrement())
  campaign_id      Int
  total_budget     Decimal   @db.Decimal(15, 2)
  spent_amount     Decimal?  @default(0.00) @db.Decimal(15, 2)
  remaining_budget Decimal?  @default(dbgenerated("(total_budget - spent_amount)")) @db.Decimal(15, 2)
  last_updated     DateTime? @default(now()) @db.Timestamptz(6)
  campaigns        campaigns @relation(fields: [campaign_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model campaign_participants {
  id                     Int                     @id @default(autoincrement())
  campaign_id            Int
  creator_id             Int
  status                 participation_status?   @default(pending)
  applied_at             DateTime?               @default(now()) @db.Timestamptz(6)
  approved_at            DateTime?               @db.Timestamptz(6)
  approved_by            Int?
  rejection_reason       String?
  status_id              Int?
  users                  users?                  @relation(fields: [approved_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  campaigns              campaigns               @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  creator_profiles       creator_profiles        @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  participation_statuses participation_statuses? @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([campaign_id, creator_id])
  @@index([status], map: "idx_campaign_participants_status")
}

model campaign_platforms {
  campaign_id Int
  platform    social_platform
  campaigns   campaigns       @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([campaign_id, platform])
}

model campaign_tags {
  campaign_id Int
  tag_id      Int
  campaigns   campaigns @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tags        tags      @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([campaign_id, tag_id])
  @@index([campaign_id], map: "idx_campaign_tags_campaign")
  @@index([tag_id], map: "idx_campaign_tags_tag")
}

model campaign_videos {
  id                 Int                  @id @default(autoincrement())
  campaign_id        Int
  creator_id         Int
  title              String               @db.VarChar(255)
  description        String?
  video_url          String               @db.VarChar(500)
  cover_url          String?              @db.VarChar(500)
  duration_seconds   Int?
  file_size          BigInt?
  status             video_status?        @default(under_review)
  submitted_at       DateTime?            @db.Timestamptz(6)
  reviewed_at        DateTime?            @db.Timestamptz(6)
  reviewed_by        Int?
  review_comments    String?
  posted_to_social   Boolean?             @default(false)
  created_at         DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?            @default(now()) @db.Timestamptz(6)
  status_id          Int?                 @default(1)
  campaigns          campaigns            @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  creator_profiles   creator_profiles     @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  users              users?               @relation(fields: [reviewed_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  video_statuses     video_statuses?      @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  channel_messages   channel_messages[]
  video_analytics    video_analytics[]
  video_social_posts video_social_posts[]

  @@index([campaign_id], map: "idx_campaign_videos_campaign_id")
  @@index([creator_id], map: "idx_campaign_videos_creator_id")
  @@index([status], map: "idx_campaign_videos_status")
}

model campaigns {
  id                       Int                        @id @default(autoincrement())
  business_id              Int
  name                     String                     @db.VarChar(255)
  description              String?
  budget                   Decimal                    @db.Decimal(15, 2)
  budget_hidden            Boolean?                   @default(false)
  duration_days            Int
  finish_date              DateTime                   @db.Date
  chat_type                chat_type?                 @default(public)
  target_creator_types     creator_type[]
  additional_requirements  String?
  payment_type             payment_type
  payment_amount           Decimal                    @db.Decimal(10, 2)
  payment_per_quantity     Int
  requirements             String
  target_audience          String?
  campaign_image_url       String?                    @db.VarChar(500)
  start_date               DateTime?                  @db.Timestamptz(6)
  end_date                 DateTime?                  @db.Timestamptz(6)
  created_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  updated_at               DateTime?                  @default(now()) @db.Timestamptz(6)
  status                   campaign_status?           @default(active)
  target_creator_types_id  Int[]                      @default([])
  status_id                Int?
  payment_type_id          Int?
  chat_type_new            String?                    @default("public") @db.VarChar(30)
  campaign_analytics       campaign_analytics[]
  campaign_assets          campaign_assets[]
  campaign_budget_tracking campaign_budget_tracking[]
  campaign_participants    campaign_participants[]
  campaign_platforms       campaign_platforms[]
  campaign_tags            campaign_tags[]
  campaign_videos          campaign_videos[]
  business_profiles        business_profiles          @relation(fields: [business_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  payment_types            payment_types?             @relation(fields: [payment_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  campaign_statuses        campaign_statuses?         @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  chat_servers             chat_servers[]

  @@index([business_id], map: "idx_campaigns_business_id")
  @@index([start_date, end_date], map: "idx_campaigns_dates")
  @@index([finish_date], map: "idx_campaigns_finish_date")
}

model chat_channels {
  id                  Int                   @id @default(autoincrement())
  chat_servers_id     Int
  name                String                @db.VarChar(100)
  channel_type        channel_type?         @default(general)
  description         String?
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  channel_state       String?               @default("public") @db.VarChar(100)
  channel_category    String?               @default("texture") @db.VarChar(50)
  channel_type_id     Int?
  channel_memberships channel_memberships[]
  channel_messages    channel_messages[]
  channel_types       channel_types?        @relation(fields: [channel_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  chat_servers        chat_servers          @relation(fields: [chat_servers_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([channel_category], map: "idx_channel_category")
}

model chat_memberships {
  id              Int              @id @default(autoincrement())
  chat_server_id  Int
  user_id         Int
  role            chat_role_type?  @default(user)
  joined_at       DateTime?        @default(now()) @db.Timestamptz(6)
  role_id         Int?
  chat_servers    chat_servers     @relation(fields: [chat_server_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  chat_role_types chat_role_types? @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users           users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([chat_server_id, user_id])
}

model chat_servers {
  id               Int                @id @default(autoincrement())
  campaign_id      Int
  name             String             @db.VarChar(255)
  description      String?
  created_at       DateTime?          @default(now()) @db.Timestamptz(6)
  chat_channels    chat_channels[]
  chat_memberships chat_memberships[]
  server_invites   server_invites[]
  campaigns        campaigns          @relation(fields: [campaign_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model server_invites {
  id              Int           @id @default(autoincrement())
  chat_server_id  Int
  invited_user_id Int
  invited_by      Int
  status          invite_status @default(pending)
  created_at      DateTime?     @default(now()) @db.Timestamptz(6)
  responded_at    DateTime?     @db.Timestamptz(6)

  chat_servers                          chat_servers @relation(fields: [chat_server_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_server_invites_invited_user     users        @relation("server_invites_invited_user", fields: [invited_user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users_server_invites_invited_by       users        @relation("server_invites_inviter", fields: [invited_by], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([chat_server_id, invited_user_id])
  @@index([invited_user_id, status], map: "idx_server_invites_user_status")
  @@index([chat_server_id], map: "idx_server_invites_server")
}

model creator_accounts {
  id                   Int                    @id @default(autoincrement())
  creator_id           Int
  available_balance    Decimal?               @default(0.00) @db.Decimal(15, 2)
  pending_balance      Decimal?               @default(0.00) @db.Decimal(15, 2)
  is_primary           Boolean?               @default(false)
  created_at           DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at           DateTime?              @default(now()) @db.Timestamptz(6)
  currency             String                 @db.VarChar(10)
  creator_profiles     creator_profiles       @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  currencies           currencies             @relation(fields: [currency], references: [code], onDelete: NoAction, onUpdate: NoAction)
  creator_transactions creator_transactions[]

  @@index([creator_id], map: "idx_creator_accounts_creator_id")
  @@index([currency], map: "idx_creator_accounts_currency")
  @@index([is_primary], map: "idx_creator_accounts_is_primary")
}

model creator_profiles {
  user_id               Int                     @id
  first_name            String                  @db.VarChar(100)
  last_name             String                  @db.VarChar(100)
  nickname              String?                 @db.VarChar(100)
  date_of_birth         DateTime?               @db.Date
  creator_type          creator_type?
  bio                   String?
  profile_image_url     String?                 @db.VarChar(500)
  max_tags_allowed      Int?                    @default(10)
  location              String?                 @db.VarChar(255)
  phone                 String?                 @db.VarChar(50)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?               @default(now()) @db.Timestamptz(6)
  creator_type_id       Int?
  business_favorites    business_favorites[]
  campaign_participants campaign_participants[]
  campaign_videos       campaign_videos[]
  creator_accounts      creator_accounts[]
  creator_types         creator_types?          @relation(fields: [creator_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users                 users                   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  creator_tags          creator_tags[]
  social_media_accounts social_media_accounts[]

  @@index([creator_type], map: "idx_creator_profiles_type")
  @@index([user_id], map: "idx_creator_profiles_user_id")
}

model creator_tags {
  creator_id       Int
  tag_id           Int
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  creator_profiles creator_profiles @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)
  tags             tags             @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([creator_id, tag_id])
  @@index([creator_id], map: "idx_creator_tags_creator")
  @@index([tag_id], map: "idx_creator_tags_tag")
}

model social_media_accounts {
  id               Int              @id @default(autoincrement())
  creator_id       Int
  platform         social_platform
  username         String?          @db.VarChar(255)
  profile_url      String?          @db.VarChar(500)
  access_token     String?
  refresh_token    String?
  token_expires_at DateTime?        @db.Timestamptz(6)
  is_connected     Boolean?         @default(false)
  last_synced      DateTime?        @db.Timestamptz(6)
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  creator_profiles creator_profiles @relation(fields: [creator_id], references: [user_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([creator_id, platform])
  @@index([creator_id, platform], map: "idx_social_media_creator_platform")
}

model tags {
  id            Int             @id @default(autoincrement())
  name          String          @unique @db.VarChar(100)
  description   String?
  business_tags business_tags[]
  campaign_tags campaign_tags[]
  creator_tags  creator_tags[]
}

model users {
  id                                                      Int                         @id @default(autoincrement())
  email                                                   String                      @unique @db.VarChar(255)
  password_hash                                           String                      @db.VarChar(255)
  user_type                                               user_type?                  @default(creator)
  email_verified                                          Boolean?                    @default(false)
  created_at                                              DateTime?                   @default(now()) @db.Timestamptz(6)
  updated_at                                              DateTime?                   @default(now()) @db.Timestamptz(6)
  email_verified_at                                       DateTime?                   @db.Timestamptz(6)
  user_type_id                                            Int
  business_profiles                                       business_profiles?
  campaign_participants                                   campaign_participants[]
  campaign_videos                                         campaign_videos[]
  channel_memberships_channel_memberships_added_byTousers channel_memberships[]       @relation("channel_memberships_added_byTousers")
  channel_memberships_channel_memberships_user_idTousers  channel_memberships[]       @relation("channel_memberships_user_idTousers")
  channel_messages                                        channel_messages[]
  chat_memberships                                        chat_memberships[]
  creator_profiles                                        creator_profiles?
  email_verification_tokens                               email_verification_tokens[]
  password_reset_tokens                                   password_reset_tokens[]
  refresh_tokens                                          refresh_tokens[]
  message_reactions                                        message_reactions[]
  server_invites_received                                  server_invites[]            @relation("server_invites_invited_user")
  server_invites_sent                                     server_invites[]            @relation("server_invites_inviter")
  user_types                                              user_types                  @relation(fields: [user_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([email], map: "idx_users_email")
  @@index([user_type], map: "idx_users_type")
}

model refresh_tokens {
  id         Int       @id @default(autoincrement())
  user_id    Int
  token_hash String    @db.VarChar(255)
  expires_at DateTime  @db.Timestamptz(6)
  revoked_at DateTime? @db.Timestamptz(6)
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  users      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([user_id], map: "idx_refresh_tokens_user")
  @@index([expires_at], map: "idx_refresh_tokens_expires")
  @@index([token_hash], map: "idx_refresh_tokens_hash")
}

model video_analytics {
  id               Int             @id @default(autoincrement())
  video_id         Int
  platform         social_platform
  views            Int?            @default(0)
  clicks           Int?            @default(0)
  engagement_count Int?            @default(0)
  reach            Int?            @default(0)
  earnings_amount  Decimal?        @default(0.00) @db.Decimal(10, 2)
  snapshot_date    DateTime        @db.Date
  synced_at        DateTime?       @default(now()) @db.Timestamptz(6)
  campaign_videos  campaign_videos @relation(fields: [video_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([video_id, platform, snapshot_date])
  @@index([video_id, platform, snapshot_date], map: "idx_video_analytics_video_platform_date")
}

model video_social_posts {
  id               Int             @id @default(autoincrement())
  video_id         Int
  platform         social_platform
  post_url         String          @db.VarChar(500)
  platform_post_id String?         @db.VarChar(255)
  posted_at        DateTime?       @default(now()) @db.Timestamptz(6)
  is_verified      Boolean?        @default(false)
  campaign_videos  campaign_videos @relation(fields: [video_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([video_id, platform])
  @@index([platform], map: "idx_video_social_posts_platform")
  @@index([is_verified], map: "idx_is_verified")
}

model email_verification_tokens {
  id         Int       @id @default(autoincrement())
  user_id    Int
  token      String    @unique @db.VarChar(255)
  expires_at DateTime  @db.Timestamptz(6)
  used_at    DateTime? @db.Timestamptz(6)
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  users      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token], map: "idx_email_verification_token")
  @@index([user_id], map: "idx_email_verification_user")
  @@index([expires_at], map: "idx_email_verification_expires")
}

model password_reset_tokens {
  id         Int       @id @default(autoincrement())
  user_id    Int
  token      String    @unique @db.VarChar(255)
  expires_at DateTime  @db.Timestamptz(6)
  used_at    DateTime? @db.Timestamptz(6)
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  users      users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token], map: "idx_password_reset_token")
  @@index([user_id], map: "idx_password_reset_user")
  @@index([expires_at], map: "idx_password_reset_expires")
}

model legal_statuses {
  id                Int                 @id @default(autoincrement())
  code              String              @unique @db.VarChar(100)
  name_en           String              @db.VarChar(255)
  name_ka           String              @db.VarChar(255)
  business_profiles business_profiles[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model business_transactions {
  id                   Int                  @id @default(autoincrement())
  business_account_id  Int
  transaction_type_id  Int
  status_id            Int
  amount               Decimal              @db.Decimal(15, 2)
  description          String?
  metadata             Json?
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  processed_at         DateTime?            @db.Timestamptz(6)
  currency             String               @db.VarChar(10)
  business_accounts    business_accounts    @relation(fields: [business_account_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  currencies           currencies           @relation(fields: [currency], references: [code], onDelete: NoAction, onUpdate: NoAction)
  transaction_statuses transaction_statuses @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  transaction_types    transaction_types    @relation(fields: [transaction_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([business_account_id], map: "idx_business_tx_account_id")
  @@index([created_at], map: "idx_business_tx_created_at")
  @@index([currency], map: "idx_business_tx_currency")
  @@index([processed_at], map: "idx_business_tx_processed_at")
  @@index([status_id], map: "idx_business_tx_status_id")
  @@index([transaction_type_id], map: "idx_business_tx_type_id")
}

model channel_memberships {
  id                                        Int              @id @default(autoincrement())
  channel_id                                Int
  user_id                                   Int
  role                                      chat_role_type?  @default(user)
  added_at                                  DateTime?        @default(now()) @db.Timestamptz(6)
  added_by                                  Int?
  role_id                                   Int?
  users_channel_memberships_added_byTousers users?           @relation("channel_memberships_added_byTousers", fields: [added_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  chat_channels                             chat_channels    @relation(fields: [channel_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  chat_role_types                           chat_role_types? @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users_channel_memberships_user_idTousers  users            @relation("channel_memberships_user_idTousers", fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([channel_id, user_id])
  @@index([channel_id], map: "idx_channel_memberships_channel")
  @@index([channel_id, user_id], map: "idx_channel_memberships_channel_user")
  @@index([user_id], map: "idx_channel_memberships_user")
}

model channel_messages {
  id                     Int                      @id @default(autoincrement())
  channel_id             Int
  sender_id              Int
  content                String
  created_at             DateTime?                @default(now()) @db.Timestamptz(6)
  pinned                 Boolean?                 @default(false)
  reply_to_id            Int?
  chat_channels          chat_channels            @relation(fields: [channel_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users                  users                    @relation(fields: [sender_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  campaign_video_id      Int?
  reply_to               channel_messages?        @relation("message_replies", fields: [reply_to_id], references: [id], onDelete: SetNull, onUpdate: NoAction)
  replies                channel_messages[]       @relation("message_replies")
  campaign_videos        campaign_videos?         @relation(fields: [campaign_video_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  channel_message_images channel_message_images[]
  message_reactions      message_reactions[]

  @@index([channel_id], map: "idx_channel_messages_channel")
  @@index([sender_id], map: "idx_channel_messages_sender")
  @@index([campaign_video_id], map: "idx_channel_messages_video")
}

model channel_message_images {
  id               Int              @id @default(autoincrement())
  message_id       Int
  image_url        String           @db.VarChar(500)
  sort_order       Int              @default(0)
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  channel_messages channel_messages @relation(fields: [message_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([message_id], map: "idx_channel_message_images_message")
}

model emojis {
  id                Int                 @id @default(autoincrement())
  name              String              @unique @db.VarChar(100)
  url               String              @db.VarChar(500)
  created_at        DateTime?           @default(now()) @db.Timestamptz(6)
  message_reactions message_reactions[]
}

model message_reactions {
  id               Int              @id @default(autoincrement())
  message_id       Int
  user_id          Int
  emoji_id         Int
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  channel_messages channel_messages @relation(fields: [message_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users            users            @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  emojis           emojis           @relation(fields: [emoji_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([message_id, user_id, emoji_id])
  @@index([message_id], map: "idx_message_reactions_message")
  @@index([user_id], map: "idx_message_reactions_user")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model creator_transactions {
  id                   Int                  @id @default(autoincrement())
  creator_account_id   Int
  transaction_type_id  Int
  status_id            Int
  amount               Decimal              @db.Decimal(15, 2)
  description          String?
  metadata             Json?
  created_at           DateTime?            @default(now()) @db.Timestamptz(6)
  processed_at         DateTime?            @db.Timestamptz(6)
  currency             String               @db.VarChar(10)
  creator_accounts     creator_accounts     @relation(fields: [creator_account_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  currencies           currencies           @relation(fields: [currency], references: [code], onDelete: NoAction, onUpdate: NoAction)
  transaction_statuses transaction_statuses @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  transaction_types    transaction_types    @relation(fields: [transaction_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([creator_account_id], map: "idx_creator_tx_account_id")
  @@index([created_at], map: "idx_creator_tx_created_at")
  @@index([currency], map: "idx_creator_tx_currency")
  @@index([processed_at], map: "idx_creator_tx_processed_at")
  @@index([status_id], map: "idx_creator_tx_status_id")
  @@index([transaction_type_id], map: "idx_creator_tx_type_id")
}

model currencies {
  code                  String                  @id @db.VarChar(10)
  name                  String                  @db.VarChar(100)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  business_accounts     business_accounts[]
  business_transactions business_transactions[]
  creator_accounts      creator_accounts[]
  creator_transactions  creator_transactions[]

  @@index([name], map: "idx_currencies_name")
}

model transaction_statuses {
  id                    Int                     @id @default(autoincrement())
  code                  String                  @unique @db.VarChar(50)
  name                  String                  @db.VarChar(100)
  description           String?
  display_order         Int?
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  business_transactions business_transactions[]
  creator_transactions  creator_transactions[]

  @@index([display_order], map: "idx_transaction_statuses_display_order")
  @@index([name], map: "idx_transaction_statuses_name")
}

model transaction_types {
  id                    Int                     @id @default(autoincrement())
  code                  String                  @unique @db.VarChar(50)
  name                  String                  @db.VarChar(100)
  description           String?
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  business_transactions business_transactions[]
  creator_transactions  creator_transactions[]

  @@index([name], map: "idx_transaction_types_name")
}

model automation_triggers {
  id                Int       @id @default(autoincrement())
  automation_name   String    @unique @db.VarChar(100)
  is_active         Boolean?  @default(false)
  last_triggered_at DateTime? @db.Timestamptz(6)
  last_completed_at DateTime? @db.Timestamptz(6)
  status            String?   @db.VarChar(50)
  error_log         String?
  created_at        DateTime? @default(now()) @db.Timestamptz(6)

  @@index([last_triggered_at], map: "idx_automation_triggers_last_triggered")
  @@index([automation_name], map: "idx_automation_triggers_name")
  @@index([status, is_active], map: "idx_automation_triggers_status_active")
}

model business_industries {
  id                Int                 @id @default(autoincrement())
  business_industry String              @unique @db.VarChar(100)
  created_at        DateTime?           @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?           @default(now()) @db.Timestamptz(6)
  business_profiles business_profiles[]
}

model campaign_statuses {
  id              Int         @id @default(autoincrement())
  campaign_status String      @unique @db.VarChar(50)
  created_at      DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?   @default(now()) @db.Timestamptz(6)
  campaigns       campaigns[]
}

model channel_types {
  id            Int             @id @default(autoincrement())
  channel_type  String          @unique @db.VarChar(50)
  created_at    DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?       @default(now()) @db.Timestamptz(6)
  chat_channels chat_channels[]
}

model chat_role_types {
  id                  Int                   @id @default(autoincrement())
  chat_role_type      String                @unique @db.VarChar(50)
  created_at          DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?             @default(now()) @db.Timestamptz(6)
  channel_memberships channel_memberships[]
  chat_memberships    chat_memberships[]
}

model creator_types {
  id               Int                @id @default(autoincrement())
  creator_type     String             @unique @db.VarChar(50)
  created_at       DateTime?          @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?          @default(now()) @db.Timestamptz(6)
  creator_profiles creator_profiles[]
}

model participation_statuses {
  id                    Int                     @id @default(autoincrement())
  participation_status  String                  @unique @db.VarChar(50)
  created_at            DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?               @default(now()) @db.Timestamptz(6)
  campaign_participants campaign_participants[]
}

model payment_types {
  id           Int         @id @default(autoincrement())
  payment_type String      @unique @db.VarChar(50)
  created_at   DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at   DateTime?   @default(now()) @db.Timestamptz(6)
  campaigns    campaigns[]
}

model user_types {
  id         Int       @id @default(autoincrement())
  user_type  String    @unique @db.VarChar(50)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)
  users      users[]
}

model video_statuses {
  id              Int               @id @default(autoincrement())
  video_status    String            @unique @db.VarChar(50)
  created_at      DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?         @default(now()) @db.Timestamptz(6)
  campaign_videos campaign_videos[]
}

enum campaign_status {
  draft
  active
  completed
}

enum channel_type {
  general
  rules
  feedback
  verification
}

enum chat_role_type {
  user
  moderator
  admin
}

enum chat_type {
  public
  private
}

enum creator_type {
  beginner
  experienced
  influencer
  clipper
}

enum participation_status {
  pending
  approved
  rejected
}

enum payment_type {
  cost_per_view
  cost_per_click
  cost_per_engagement
  cost_per_reach
}

enum social_platform {
  instagram
  tiktok
  facebook
}

enum user_status {
  active
  inactive
  suspended
}

enum user_type {
  business
  creator
}

enum video_status {
  under_review
  approved
  rejected
}

enum business_industry {
  Manufacturing
  Trade
  Services
  Agriculture
  EcommerceInformation_Technology @map("EcommerceInformation Technology")
  Construction
  Transportation
  Creative_Industries             @map("Creative Industries")
  Marketing
  Other
}

enum invite_status {
  pending
  accepted
  declined
}
